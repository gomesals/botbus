{"version":3,"sources":["../../src/js/lines.js"],"names":["angular","module","controller","linesCtrl","linesFormCtrl","$http","vm","loading","get","then","data","r","handleError","e","remove","index","indexOf","item","delete","_id","status","splice","id","window","location","pathname","split","saving","days","value","title","setTimeout","edit","paths","save","method","url","console","log","$inject"],"mappings":"aACA,CAAC,UAAW,CACX,aACAA,QAAQC,MAAR,CAAe,QAAf,CAAyB,CAAC,iBAAD,CAAzB,EAA8CC,UAA9C,CAAyD,WAAzD,CAAsEC,SAAtE,EAAiFD,UAAjF,CAA4F,eAA5F,CAA6GE,aAA7G,EAEA,QAASD,UAAT,CAAmBE,KAAnB,CAA0B,CACzB,GAAMC,IAAK,IAAX,CACAA,GAAGC,OAAH,CAAa,IAAb,CACAF,MAAMG,GAAN,CAAU,WAAV,EAAuBC,IAAvB,CAA4B,WAAK,CAChCH,GAAGI,IAAH,CAAUC,EAAED,IAAZ,CACAJ,GAAGC,OAAH,CAAa,KACb,CAHD,CAGG,WAAK,CACPD,GAAGC,OAAH,CAAa,KAAb,CACAK,YAAYC,CAAZ,CACA,CAND,EAOAP,GAAGQ,MAAH,CAAY,cAAQ,CACnB,GAAMC,OAAQT,GAAGI,IAAH,CAAQM,OAAR,CAAgBC,IAAhB,CAAd,CACAZ,MAAMa,MAAN,cAA0BZ,GAAGI,IAAH,CAAQK,KAAR,EAAeI,GAAzC,EAAgDV,IAAhD,CAAqD,WAAK,CACzD,GAAIE,EAAES,MAAF,GAAa,GAAjB,CAAsB,CACrBd,GAAGI,IAAH,CAAQW,MAAR,CAAeN,KAAf,CAAsB,CAAtB,CACA,CACD,CAJD,CAIGH,WAJH,CAKA,CACD,CAED,QAASR,cAAT,CAAuBC,KAAvB,CAA8B,CAC7B,GAAMC,IAAK,IAAX,CACA,GAAMgB,IAAKC,OAAOC,QAAP,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CAAX,CACApB,GAAGqB,MAAH,CAAY,KAAZ,CACArB,GAAGI,IAAH,CAAU,EAAV,CACAJ,GAAGsB,IAAH,CAAU,CAAC,CACVC,MAAO,KADG,CAEVC,MAAO,SAFG,CAAD,CAGP,CACFD,MAAO,KADL,CAEFC,MAAO,eAFL,CAHO,CAMP,CACFD,MAAO,KADL,CAEFC,MAAO,gBAFL,CANO,CASP,CACFD,MAAO,KADL,CAEFC,MAAO,cAFL,CATO,CAYP,CACFD,MAAO,KADL,CAEFC,MAAO,cAFL,CAZO,CAeP,CACFD,MAAO,KADL,CAEFC,MAAO,aAFL,CAfO,CAkBP,CACFD,MAAO,KADL,CAEFC,MAAO,WAFL,CAlBO,CAAV,CAsBAC,WAAW,UAAM,CAChB,GAAIzB,GAAG0B,IAAP,CAAa,CACZ3B,MAAMG,GAAN,cAAuBc,EAAvB,EAA6Bb,IAA7B,CAAkC,WAAK,CACtCH,GAAGI,IAAH,CAAUC,EAAED,IACZ,CAFD,CAEGE,WAFH,CAGA,CACD,CAND,CAMG,GANH,EAOAP,MAAMG,GAAN,CAAU,YAAV,EAAwBC,IAAxB,CAA6B,WAAK,CACjCH,GAAG2B,KAAH,CAAWtB,EAAED,IACb,CAFD,CAEGE,WAFH,EAGAN,GAAG4B,IAAH,CAAU,UAAM,CACf5B,GAAGqB,MAAH,CAAY,IAAZ,CACAtB,MAAM,CACL8B,OAAS7B,GAAG0B,IAAH,CAAU,KAAV,CAAkB,MADtB,CAELI,IAAM9B,GAAG0B,IAAH,cAAuBV,EAAvB,CAA8B,WAF/B,CAGLZ,KAAMJ,GAAGI,IAHJ,CAAN,EAIGD,IAJH,CAIQ,WAAK,CACZc,OAAOC,QAAP,CAAkB,oBAClB,CAND,CAMG,WAAK,CACPlB,GAAGqB,MAAH,CAAY,KAAZ,CACAf,YAAYC,CAAZ,CACA,CATD,CAUA,CACD,CAED,QAASD,YAAT,CAAqBC,CAArB,CAAwB,CACvBwB,QAAQC,GAAR,CAAYzB,CAAZ,CACA,CACDV,UAAUoC,OAAV,CAAoB,CAAC,OAAD,CAApB,CACAnC,cAAcmC,OAAd,CAAwB,CAAC,OAAD,CACxB,CAjFD","file":"lines.js","sourcesContent":["/*global angular*/\n(function() {\n\t'use strict';\n\tangular.module('botbus', ['checklist-model']).controller('linesCtrl', linesCtrl).controller('linesFormCtrl', linesFormCtrl);\n\n\tfunction linesCtrl($http) {\n\t\tconst vm = this;\n\t\tvm.loading = true;\n\t\t$http.get('api/lines').then(r => {\n\t\t\tvm.data = r.data;\n\t\t\tvm.loading = false;\n\t\t}, e => {\n\t\t\tvm.loading = false;\n\t\t\thandleError(e);\n\t\t});\n\t\tvm.remove = item => {\n\t\t\tconst index = vm.data.indexOf(item);\n\t\t\t$http.delete(`api/lines/${vm.data[index]._id}`).then(r => {\n\t\t\t\tif (r.status === 200) {\n\t\t\t\t\tvm.data.splice(index, 1);\n\t\t\t\t}\n\t\t\t}, handleError);\n\t\t};\n\t}\n\n\tfunction linesFormCtrl($http) {\n\t\tconst vm = this;\n\t\tconst id = window.location.pathname.split('/')[3];\n\t\tvm.saving = false;\n\t\tvm.data = {};\n\t\tvm.days = [{\n\t\t\tvalue: 'Sun',\n\t\t\ttitle: 'Domingo'\n\t\t}, {\n\t\t\tvalue: 'Mon',\n\t\t\ttitle: 'Segunda-feira'\n\t\t}, {\n\t\t\tvalue: 'Tue',\n\t\t\ttitle: 'Terça-feira'\n\t\t}, {\n\t\t\tvalue: 'Wed',\n\t\t\ttitle: 'Quarta-feira'\n\t\t}, {\n\t\t\tvalue: 'Thu',\n\t\t\ttitle: 'Quinta-feira'\n\t\t}, {\n\t\t\tvalue: 'Fri',\n\t\t\ttitle: 'Sexta-feira'\n\t\t}, {\n\t\t\tvalue: 'Sat',\n\t\t\ttitle: 'Sábado'\n\t\t}];\n\t\tsetTimeout(() => {\n\t\t\tif (vm.edit) {\n\t\t\t\t$http.get(`api/lines/${id}`).then(r => {\n\t\t\t\t\tvm.data = r.data;\n\t\t\t\t}, handleError);\n\t\t\t}\n\t\t}, 100);\n\t\t$http.get('/api/paths').then(r => {\n\t\t\tvm.paths = r.data;\n\t\t}, handleError);\n\t\tvm.save = () => {\n\t\t\tvm.saving = true;\n\t\t\t$http({\n\t\t\t\tmethod: (vm.edit ? 'PUT' : 'POST'),\n\t\t\t\turl: (vm.edit ? `api/lines/${id}` : 'api/lines'),\n\t\t\t\tdata: vm.data,\n\t\t\t}).then(r => {\n\t\t\t\twindow.location = 'painel/itinerarios';\n\t\t\t}, e => {\n\t\t\t\tvm.saving = false;\n\t\t\t\thandleError(e);\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction handleError(e) {\n\t\tconsole.log(e);\n\t}\n\tlinesCtrl.$inject = ['$http'];\n\tlinesFormCtrl.$inject = ['$http'];\n})();\n"]}