{"version":3,"sources":["../../src/js/neighborhoods.js"],"names":["angular","module","controller","neighCtrl","neighFormCtrl","$http","vm","get","then","data","r","handleError","remove","index","indexOf","item","delete","_id","status","splice","saving","id","window","location","pathname","split","setTimeout","edit","save","method","url","e","console","log","$inject"],"mappings":"aACA,CAAC,UAAW,CACX,aACAA,QAAQC,MAAR,CAAe,QAAf,EAAyBC,UAAzB,CAAoC,WAApC,CAAiDC,SAAjD,EAA4DD,UAA5D,CAAuE,eAAvE,CAAwFE,aAAxF,EAEA,QAASD,UAAT,CAAmBE,KAAnB,CAA0B,CACzB,GAAMC,IAAK,IAAX,CACAD,MAAME,GAAN,CAAU,mBAAV,EAA+BC,IAA/B,CAAoC,WAAK,CACxCF,GAAGG,IAAH,CAAUC,EAAED,IACZ,CAFD,CAEGE,WAFH,EAGAL,GAAGM,MAAH,CAAY,cAAQ,CACnB,GAAMC,OAAQP,GAAGG,IAAH,CAAQK,OAAR,CAAgBC,IAAhB,CAAd,CACAV,MAAMW,MAAN,sBAAkCV,GAAGG,IAAH,CAAQI,KAAR,EAAeI,GAAjD,EAAwDT,IAAxD,CAA6D,WAAK,CACjE,GAAIE,EAAEQ,MAAF,GAAa,GAAjB,CAAsB,CACrBZ,GAAGG,IAAH,CAAQU,MAAR,CAAeN,KAAf,CAAsB,CAAtB,CACA,CACD,CAJD,CAIGF,WAJH,CAKA,CACD,CAED,QAASP,cAAT,CAAuBC,KAAvB,CAA8B,CAC7B,GAAMC,IAAK,IAAX,CACAA,GAAGc,MAAH,CAAY,KAAZ,CACAd,GAAGG,IAAH,CAAU,EAAV,CACA,GAAMY,IAAKC,OAAOC,QAAP,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CAAX,CACAC,WAAW,UAAM,CAChB,GAAIpB,GAAGqB,IAAP,CAAa,CACZtB,MAAME,GAAN,sBAA+Bc,EAA/B,EAAqCb,IAArC,CAA0C,WAAK,CAC9CF,GAAGG,IAAH,CAAUC,EAAED,IACZ,CAFD,CAEGE,WAFH,CAGA,CACD,CAND,CAMG,GANH,EAOAL,GAAGsB,IAAH,CAAU,UAAM,CACftB,GAAGc,MAAH,CAAY,IAAZ,CACAf,MAAM,CACLwB,OAASvB,GAAGqB,IAAH,CAAU,KAAV,CAAkB,MADtB,CAELG,IAAMxB,GAAGqB,IAAH,sBAA+BN,EAA/B,CAAsC,mBAFvC,CAGLZ,KAAMH,GAAGG,IAHJ,CAAN,EAIGD,IAJH,CAIQ,WAAK,CACZc,OAAOC,QAAP,CAAkB,gBAClB,CAND,CAMG,WAAK,CACPjB,GAAGc,MAAH,CAAY,KAAZ,CACAT,YAAYoB,CAAZ,CACA,CATD,CAUA,CACD,CAED,QAASpB,YAAT,CAAqBoB,CAArB,CAAwB,CACvBC,QAAQC,GAAR,CAAYF,CAAZ,CACA,CACD5B,UAAU+B,OAAV,CAAoB,CAAC,OAAD,CAApB,CACA9B,cAAc8B,OAAd,CAAwB,CAAC,OAAD,CACxB,CAnDD","file":"neighborhoods.js","sourcesContent":["/*global angular*/\n(function() {\n\t'use strict';\n\tangular.module('botbus').controller('neighCtrl', neighCtrl).controller('neighFormCtrl', neighFormCtrl);\n\n\tfunction neighCtrl($http) {\n\t\tconst vm = this;\n\t\t$http.get('api/neighborhoods').then(r => {\n\t\t\tvm.data = r.data;\n\t\t}, handleError);\n\t\tvm.remove = item => {\n\t\t\tconst index = vm.data.indexOf(item);\n\t\t\t$http.delete(`api/neighborhoods/${vm.data[index]._id}`).then(r => {\n\t\t\t\tif (r.status === 200) {\n\t\t\t\t\tvm.data.splice(index, 1);\n\t\t\t\t}\n\t\t\t}, handleError);\n\t\t};\n\t}\n\n\tfunction neighFormCtrl($http) {\n\t\tconst vm = this;\n\t\tvm.saving = false;\n\t\tvm.data = {};\n\t\tconst id = window.location.pathname.split('/')[3];\n\t\tsetTimeout(() => {\n\t\t\tif (vm.edit) {\n\t\t\t\t$http.get(`api/neighborhoods/${id}`).then(r => {\n\t\t\t\t\tvm.data = r.data;\n\t\t\t\t}, handleError);\n\t\t\t}\n\t\t}, 100);\n\t\tvm.save = () => {\n\t\t\tvm.saving = true;\n\t\t\t$http({\n\t\t\t\tmethod: (vm.edit ? 'PUT' : 'POST'),\n\t\t\t\turl: (vm.edit ? `api/neighborhoods/${id}` : 'api/neighborhoods'),\n\t\t\t\tdata: vm.data,\n\t\t\t}).then(r => {\n\t\t\t\twindow.location = 'painel/bairros';\n\t\t\t}, e => {\n\t\t\t\tvm.saving = false;\n\t\t\t\thandleError(e);\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction handleError(e) {\n\t\tconsole.log(e);\n\t}\n\tneighCtrl.$inject = ['$http'];\n\tneighFormCtrl.$inject = ['$http'];\n})();\n"]}